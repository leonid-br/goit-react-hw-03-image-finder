(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{14:function(e,t,r){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__eVn1N",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__sDggo"}},15:function(e,t,r){e.exports={error:"ErrorQuery_error__33ZAH",text:"ErrorQuery_text__2QHNd"}},16:function(e,t,r){e.exports={text:"Idel_text__3WNN0",icon:"Idel_icon__1yD4L"}},17:function(e,t,r){e.exports={overlay:"Modal_overlay__t_v75",modal:"Modal_modal__1oLTD"}},19:function(e,t,r){e.exports={Style:"App_Style__oWuxB"}},21:function(e,t,r){e.exports={loader:"Loader_loader__BXb3g"}},23:function(e,t,r){e.exports={imageGallery:"ImageGallery_imageGallery__U90RZ"}},24:function(e,t,r){e.exports={button:"Button_button__27pBE"}},30:function(e,t,r){},4:function(e,t,r){e.exports={searchbar:"Searchbar_searchbar__2FtfJ",searchForm:"Searchbar_searchForm__3KDps",searchFormButton:"Searchbar_searchFormButton__mU8lj",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__1njM4",searchFormInput:"Searchbar_searchFormInput__2nzD3"}},62:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(3),c=r.n(o),l=(r(30),r(18)),s=r(8),i=r(9),u=r(11),m=r(10),g=r(19),h=r(12),d=(r(31),r(32),r(25)),b=r(4),j=r.n(b),p=r(1),f=function(e){var t=e.onSubmit,r=Object(a.useState)(""),n=Object(d.a)(r,2),o=n[0],c=n[1];return Object(p.jsx)("header",{className:j.a.searchbar,children:Object(p.jsxs)("form",{className:j.a.searchForm,onSubmit:function(e){e.preventDefault(),t(o),c("")},children:[Object(p.jsx)("button",{type:"submit",className:j.a.searchFormButton,children:Object(p.jsx)("span",{className:j.a.searchFormButtonLabel,children:"Search"})}),Object(p.jsx)("input",{className:j.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){c(e.currentTarget.value)},value:o})]})})},y=r(14),v=r.n(y);function x(e){var t=e.id,r=e.largeImageURL,a=e.webformatURL,n=e.tags,o=e.toggleModal,c=e.onImgClick;return Object(p.jsx)("li",{className:v.a.imageGalleryItem,onClick:c,"data-action":r,children:Object(p.jsx)("img",{src:a,alt:n,className:v.a.imageGalleryItemImage,onClick:o})},t)}var O=r(15),_=r.p+"static/media/sadcat.3fe9e899.jpg";function w(e){var t=e.message;return Object(p.jsxs)("div",{role:"alert",className:O.error,children:[Object(p.jsx)("p",{className:O.text,children:t}),Object(p.jsx)("img",{src:_,width:"240",alt:"bad query"})]})}var I,E,S,N,k,C,F,L,M,B,G,U,A,D,P,R,Q=r(20),T=r.n(Q),K=r(21),Y=function(){return Object(p.jsx)("div",{className:K.loader,children:Object(p.jsx)(T.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})})},q=["title","titleId"];function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function J(e,t){var r=e.title,n=e.titleId,o=H(e,q);return a.createElement("svg",z({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 155.139 155.139",style:{enableBackground:"new 0 0 155.139 155.139"},xmlSpace:"preserve",ref:t,"aria-labelledby":n},o),r?a.createElement("title",{id:n},r):null,I||(I=a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M114.588,45.42h28.17L97.338,0l-45.42,45.42h28.516C76.4,98.937,48.529,142.173,12.381,152.686 c5.513,1.605,11.224,2.452,17.071,2.452C73.601,155.139,109.94,107.111,114.588,45.42z"})))),E||(E=a.createElement("g",null)),S||(S=a.createElement("g",null)),N||(N=a.createElement("g",null)),k||(k=a.createElement("g",null)),C||(C=a.createElement("g",null)),F||(F=a.createElement("g",null)),L||(L=a.createElement("g",null)),M||(M=a.createElement("g",null)),B||(B=a.createElement("g",null)),G||(G=a.createElement("g",null)),U||(U=a.createElement("g",null)),A||(A=a.createElement("g",null)),D||(D=a.createElement("g",null)),P||(P=a.createElement("g",null)),R||(R=a.createElement("g",null)))}var W=a.forwardRef(J),X=(r.p,r(16)),Z=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(W,{width:"40",fill:"red",className:X.icon}),Object(p.jsx)("p",{className:X.text,children:"Please, enter your search"})]})},V=r(22),$=r.n(V),ee=r(23);function te(e){var t=e.status,r=e.imgArr,a=e.toggleModal,n=e.onImgClick,o=e.error;return"idle"===t?Object(p.jsx)(Z,{}):"pending"===t?Object(p.jsx)(Y,{}):"rejected"===t?Object(p.jsx)(w,{message:o}):"resolved"===t?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("ul",{className:ee.imageGallery,children:r.map((function(e){var t=e.webformatURL,r=e.largeImageURL,o=e.tags;return Object(p.jsx)(x,{toggleModal:a,onImgClick:n,id:$.a.generate(),webformatURL:t,largeImageURL:r,tags:o})}))})}):void 0}var re=r(17),ae=document.querySelector("#modal-root"),ne=function(e){Object(u.a)(r,e);var t=Object(m.a)(r);function r(){var e;Object(s.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleOverlayClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(i.a)(r,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.url,r=e.tag,a=this.handleOverlayClick;return Object(o.createPortal)(Object(p.jsx)("div",{className:re.overlay,onClick:a,children:Object(p.jsx)("div",{className:re.modal,children:Object(p.jsx)("img",{src:t,alt:r})})}),ae)}}]),r}(a.Component),oe=r(24);function ce(e){var t=e.onLoadMore;return Object(p.jsx)("button",{type:"button",onClick:t,className:oe.button,children:"Load more"})}var le={pageNumber:1,KEY:"22290426-07a1b6b21ce6d6b5919cefbe3",URL:"https://pixabay.com/api/",TYPE_PIC:"image_type=photo&orientation=horizontal"};var se={fetchImg:function(e){return fetch("".concat(le.URL,"?q=").concat(e,"&page=").concat(le.pageNumber,"&key=").concat(le.KEY,"&").concat(le.TYPE_PIC,"&per_page=12\n")).then((function(e){return e.json()}))}},ie=function(e){Object(u.a)(r,e);var t=Object(m.a)(r);function r(){var e;Object(s.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:"",showModal:!1,targetImg:null,imgName:null,status:"idle",imgArr:[],error:null},e.handleFormSubmit=function(t){e.setState({searchQuery:t})},e.imgFetch=function(){var t=e.state.searchQuery;se.fetchImg(t).then((function(r){return e.setState((function(a){return 0!==r.hits.length?(le.pageNumber+=1,e.setState({imgArr:[].concat(Object(l.a)(a.imgArr),Object(l.a)(r.hits)),status:"resolved"})):e.setState({status:"rejected",error:"\u041a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(t," \u043d\u0435\u0442")})}))})).catch((function(t){return e.setState({error:t})})).finally((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.onImgClick=function(t){var r=t.currentTarget.dataset.action,a=t.target.alt;e.setState({targetImg:r}),e.setState({imgName:a})},e}return Object(i.a)(r,[{key:"componentDidUpdate",value:function(e,t){var r=this.state.searchQuery;""!==r.trim()?t.searchQuery!==r&&(this.setState({status:"pending"}),this.setState({imgArr:[]}),this.imgFetch()):h.b.warn("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441")}},{key:"render",value:function(){var e=this.state,t=e.showModal,r=e.targetImg,a=e.imgName,n=e.status,o=e.imgArr,c=e.error,l=this.handleFormSubmit,s=this.toggleModal,i=this.onImgClick,u=this.imgFetch;return Object(p.jsxs)("div",{className:g.Style,children:[Object(p.jsx)(f,{onSubmit:l}),Object(p.jsx)(te,{error:c,status:n,imgArr:o,toggleModal:s,onImgClick:i}),"resolved"===n&&Object(p.jsx)(ce,{onLoadMore:u}),t&&Object(p.jsx)(ne,{url:r,tag:a,onClose:s}),Object(p.jsx)(h.a,{position:"top-center",autoClose:2e3})]})}}]),r}(a.Component);c.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(ie,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.00888680.chunk.js.map