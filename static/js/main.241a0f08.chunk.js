(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{12:function(e,t,r){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__eVn1N",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__sDggo"}},13:function(e,t,r){e.exports={error:"ErrorQuery_error__33ZAH",text:"ErrorQuery_text__2QHNd"}},14:function(e,t,r){e.exports={text:"Idel_text__3WNN0",icon:"Idel_icon__1yD4L"}},15:function(e,t,r){e.exports={overlay:"Modal_overlay__t_v75",modal:"Modal_modal__1oLTD"}},17:function(e,t,r){e.exports={Style:"App_Style__oWuxB"}},19:function(e,t,r){e.exports={loader:"Loader_loader__BXb3g"}},21:function(e,t,r){e.exports={imageGallery:"ImageGallery_imageGallery__U90RZ"}},22:function(e,t,r){e.exports={button:"Button_button__27pBE"}},27:function(e,t,r){},4:function(e,t,r){e.exports={searchbar:"Searchbar_searchbar__2FtfJ",searchForm:"Searchbar_searchForm__3KDps",searchFormButton:"Searchbar_searchFormButton__mU8lj",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__1njM4",searchFormInput:"Searchbar_searchFormInput__2nzD3"}},59:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(3),l=r.n(o),c=(r(27),r(16)),s=r(6),i=r(7),u=r(9),m=r(8),g=r(17),h=r(10),d=(r(28),r(29),r(4)),b=r.n(d),p=r(1),j=function(e){var t=e.onSubmit,r=e.onChange;return Object(p.jsx)("header",{className:b.a.searchbar,children:Object(p.jsxs)("form",{className:b.a.searchForm,onSubmit:t,children:[Object(p.jsx)("button",{type:"submit",className:b.a.searchFormButton,children:Object(p.jsx)("span",{className:b.a.searchFormButtonLabel,children:"Search"})}),Object(p.jsx)("input",{className:b.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:r})]})})},f=r(12),y=r.n(f);function v(e){var t=e.id,r=e.largeImageURL,a=e.webformatURL,n=e.tags,o=e.toggleModal,l=e.onImgClick;return Object(p.jsx)("li",{className:y.a.imageGalleryItem,onClick:l,"data-action":r,children:Object(p.jsx)("img",{src:a,alt:n,className:y.a.imageGalleryItemImage,onClick:o})},t)}var x=r(13),O=r.p+"static/media/sadcat.3fe9e899.jpg";function _(e){var t=e.message;return Object(p.jsxs)("div",{role:"alert",className:x.error,children:[Object(p.jsx)("p",{className:x.text,children:t}),Object(p.jsx)("img",{src:O,width:"240",alt:"bad query"})]})}var w,I,E,C,S,k,N,L,F,M,B,A,G,U,D,P,R=r(18),Q=r.n(R),K=r(19),T=function(){return Object(p.jsx)("div",{className:K.loader,children:Object(p.jsx)(Q.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})})},Y=["title","titleId"];function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function H(e,t){var r=e.title,n=e.titleId,o=z(e,Y);return a.createElement("svg",q({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 155.139 155.139",style:{enableBackground:"new 0 0 155.139 155.139"},xmlSpace:"preserve",ref:t,"aria-labelledby":n},o),r?a.createElement("title",{id:n},r):null,w||(w=a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M114.588,45.42h28.17L97.338,0l-45.42,45.42h28.516C76.4,98.937,48.529,142.173,12.381,152.686 c5.513,1.605,11.224,2.452,17.071,2.452C73.601,155.139,109.94,107.111,114.588,45.42z"})))),I||(I=a.createElement("g",null)),E||(E=a.createElement("g",null)),C||(C=a.createElement("g",null)),S||(S=a.createElement("g",null)),k||(k=a.createElement("g",null)),N||(N=a.createElement("g",null)),L||(L=a.createElement("g",null)),F||(F=a.createElement("g",null)),M||(M=a.createElement("g",null)),B||(B=a.createElement("g",null)),A||(A=a.createElement("g",null)),G||(G=a.createElement("g",null)),U||(U=a.createElement("g",null)),D||(D=a.createElement("g",null)),P||(P=a.createElement("g",null)))}var J=a.forwardRef(H),W=(r.p,r(14)),X=function(){return Object(p.jsxs)("div",{children:[Object(p.jsx)(J,{width:"40",fill:"red",className:W.icon}),Object(p.jsx)("p",{className:W.text,children:"Please, enter your search"})]})},Z=r(20),V=r.n(Z),$=r(21);function ee(e){var t=e.status,r=e.imgArr,a=e.toggleModal,n=e.onImgClick,o=e.error;return"idle"===t?Object(p.jsx)(X,{}):"pending"===t?Object(p.jsx)(T,{}):"rejected"===t?Object(p.jsx)(_,{message:o}):"resolved"===t?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("ul",{className:$.imageGallery,children:r.map((function(e){var t=e.webformatURL,r=e.largeImageURL,o=e.tags;return Object(p.jsx)(v,{toggleModal:a,onImgClick:n,id:V.a.generate(),webformatURL:t,largeImageURL:r,tags:o})}))})}):void 0}var te=r(15),re=document.querySelector("#modal-root"),ae=function(e){Object(u.a)(r,e);var t=Object(m.a)(r);function r(){var e;Object(s.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleOverlayClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(i.a)(r,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.url,r=e.tag,a=this.handleOverlayClick;return Object(o.createPortal)(Object(p.jsx)("div",{className:te.overlay,onClick:a,children:Object(p.jsx)("div",{className:te.modal,children:Object(p.jsx)("img",{src:t,alt:r})})}),re)}}]),r}(a.Component),ne=r(22);function oe(e){var t=e.onLoadMore;return Object(p.jsx)("button",{type:"button",onClick:t,className:ne.button,children:"Load more"})}var le={pageNumber:1,KEY:"22290426-07a1b6b21ce6d6b5919cefbe3",URL:"https://pixabay.com/api/",TYPE_PIC:"image_type=photo&orientation=horizontal"};var ce={fetchImg:function(e){return fetch("".concat(le.URL,"?q=").concat(e,"&page=").concat(le.pageNumber,"&key=").concat(le.KEY,"&").concat(le.TYPE_PIC,"&per_page=12\n")).then((function(e){return e.json()}))}},se=function(e){Object(u.a)(r,e);var t=Object(m.a)(r);function r(){var e;Object(s.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:"",showModal:!1,targetImg:null,imgName:null,status:"idle",imgArr:null,error:null},e.handleInputChange=function(t){e.setState({searchQuery:t.target.value.toLowerCase()})},e.handleFormSubmit=function(t){t.preventDefault();var r=e.state.searchQuery;""!==r.trim()?(e.setState({status:"pending"}),ce.fetchImg(r).then((function(t){return e.checkedEmptyArr(t,r)})).catch((function(t){return e.setState({error:t})}))):h.b.warn("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441")},e.onLoadMore=function(){var t=e.state.searchQuery;le.pageNumber+=1,ce.fetchImg(t).then((function(t){return e.setState((function(e){return{imgArr:[].concat(Object(c.a)(e.imgArr),Object(c.a)(t.hits)),status:"resolved"}}))})).catch((function(t){return e.setState({error:t})})).finally((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e.checkedEmptyArr=function(t,r){return 0!==t.hits.length?e.setState({imgArr:t.hits,status:"resolved"}):e.setState({status:"rejected",error:"\u041a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(r," \u043d\u0435\u0442")})},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.onImgClick=function(t){var r=t.currentTarget.dataset.action,a=t.target.alt;e.setState({targetImg:r}),e.setState({imgName:a})},e}return Object(i.a)(r,[{key:"render",value:function(){var e=this.state,t=e.showModal,r=e.targetImg,a=e.imgName,n=e.status,o=e.imgArr,l=e.error,c=this.handleFormSubmit,s=this.toggleModal,i=this.onImgClick,u=this.onLoadMore,m=this.handleInputChange;return Object(p.jsxs)("div",{className:g.Style,children:[Object(p.jsx)(j,{onSubmit:c,onChange:m}),Object(p.jsx)(ee,{error:l,status:n,imgArr:o,toggleModal:s,onImgClick:i}),"resolved"===n&&Object(p.jsx)(oe,{onLoadMore:u}),t&&Object(p.jsx)(ae,{url:r,tag:a,onClose:s}),Object(p.jsx)(h.a,{position:"top-center",autoClose:2e3})]})}}]),r}(a.Component);l.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(se,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.241a0f08.chunk.js.map