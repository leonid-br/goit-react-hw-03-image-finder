(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,r){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__eVn1N",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__sDggo"}},12:function(e,t,r){e.exports={error:"ErrorQuery_error__33ZAH",text:"ErrorQuery_text__2QHNd"}},13:function(e,t,r){e.exports={text:"Idel_text__3WNN0",icon:"Idel_icon__1yD4L"}},14:function(e,t,r){e.exports={overlay:"Modal_overlay__t_v75",modal:"Modal_modal__1oLTD"}},16:function(e,t,r){e.exports={Style:"App_Style__oWuxB"}},18:function(e,t,r){e.exports={loader:"Loader_loader__BXb3g"}},19:function(e,t,r){e.exports={button:"Button_button__27pBE"}},20:function(e,t,r){e.exports={imageGallery:"ImageGallery_imageGallery__U90RZ"}},25:function(e,t,r){},49:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(7),c=r.n(o),l=(r(25),r(3)),s=r(4),i=r(6),u=r(5),m=r(16),h=r(9),g=(r(26),r(27),r(8)),d=r.n(g),b=r(1),p=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.handlImageChange=function(t){e.setState({searchQuery:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){var r=e.state.searchQuery;t.preventDefault(),""!==r.trim()?(e.props.onSubmit(r),e.setState({searchQuery:""})):h.b.warn("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0437\u0430\u043f\u0440\u043e\u0441")},e}return Object(s.a)(r,[{key:"render",value:function(){var e=this.handlImageChange,t=this.state.searchQuery;return Object(b.jsx)("header",{className:d.a.searchbar,children:Object(b.jsxs)("form",{className:d.a.searchForm,onSubmit:this.handleSubmit,children:[Object(b.jsx)("button",{type:"submit",className:d.a.searchFormButton,children:Object(b.jsx)("span",{className:d.a.searchFormButtonLabel,children:"Search"})}),Object(b.jsx)("input",{className:d.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:e,value:t})]})})}}]),r}(a.Component),j=r(15),f=r(11),y=r.n(f);function v(e){var t=e.id,r=e.largeImageURL,a=e.webformatURL,n=e.tags,o=e.toggleModal,c=e.onImgClick;return Object(b.jsx)("li",{className:y.a.imageGalleryItem,onClick:c,"data-action":r,children:Object(b.jsx)("img",{src:a,alt:n,className:y.a.imageGalleryItemImage,onClick:o})},t)}var O=r(12),x=r.p+"static/media/sadcat.3fe9e899.jpg";function _(e){var t=e.message;return Object(b.jsxs)("div",{role:"alert",className:O.error,children:[Object(b.jsx)("p",{className:O.text,children:t}),Object(b.jsx)("img",{src:x,width:"240",alt:"bad query"})]})}var w,I,E,S,k,C,N,L,F,M,Q,B,G,U,D,P,R=r(17),q=r.n(R),A=r(18),T=function(){return Object(b.jsx)("div",{className:A.loader,children:Object(b.jsx)(q.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})})},K=["title","titleId"];function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function z(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function H(e,t){var r=e.title,n=e.titleId,o=z(e,K);return a.createElement("svg",Y({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 155.139 155.139",style:{enableBackground:"new 0 0 155.139 155.139"},xmlSpace:"preserve",ref:t,"aria-labelledby":n},o),r?a.createElement("title",{id:n},r):null,w||(w=a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M114.588,45.42h28.17L97.338,0l-45.42,45.42h28.516C76.4,98.937,48.529,142.173,12.381,152.686 c5.513,1.605,11.224,2.452,17.071,2.452C73.601,155.139,109.94,107.111,114.588,45.42z"})))),I||(I=a.createElement("g",null)),E||(E=a.createElement("g",null)),S||(S=a.createElement("g",null)),k||(k=a.createElement("g",null)),C||(C=a.createElement("g",null)),N||(N=a.createElement("g",null)),L||(L=a.createElement("g",null)),F||(F=a.createElement("g",null)),M||(M=a.createElement("g",null)),Q||(Q=a.createElement("g",null)),B||(B=a.createElement("g",null)),G||(G=a.createElement("g",null)),U||(U=a.createElement("g",null)),D||(D=a.createElement("g",null)),P||(P=a.createElement("g",null)))}var J=a.forwardRef(H),W=(r.p,r(13)),X=function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(J,{width:"40",fill:"red",className:W.icon}),Object(b.jsx)("p",{className:W.text,children:"Please, enter your search"})]})},Z={pageNumber:1,KEY:"22290426-07a1b6b21ce6d6b5919cefbe3",URL:"https://pixabay.com/api/",TYPE_PIC:"image_type=photo&orientation=horizontal"};var V={fetchImg:function(e){return fetch("".concat(Z.URL,"?q=").concat(e,"&page=").concat(Z.pageNumber,"&key=").concat(Z.KEY,"&").concat(Z.TYPE_PIC,"&per_page=12\n")).then((function(e){return e.json()}))}},$=r(19);function ee(e){var t=e.onLoadMore;return Object(b.jsx)("button",{type:"button",onClick:t,className:$.button,children:"Load more"})}var te=r(20),re=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={query:null,error:null,status:"idle"},e.checkedEmptyArr=function(t,r){return 0!==t.hits.length?e.setState({query:t.hits,status:"resolved"}):e.setState({status:"rejected",error:"\u041a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(r," \u043d\u0435\u0442")})},e.onLoadMore=function(){var t=e.props.searchQuery;Z.pageNumber+=1,V.fetchImg(t).then((function(t){return e.setState((function(e){return{query:[].concat(Object(j.a)(e.query),Object(j.a)(t.hits)),status:"resolved"}}))})).catch((function(t){return e.setState({error:t})})).finally((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e}return Object(s.a)(r,[{key:"componentDidUpdate",value:function(e,t){var r=this,a=this.props.searchQuery;e.searchQuery!==a&&(this.setState({status:"pending"}),V.fetchImg(a).then((function(e){return r.checkedEmptyArr(e,a)})).catch((function(e){return r.setState({error:e})})))}},{key:"render",value:function(){var e=this.state,t=e.error,r=e.query,a=e.status,n=this.props,o=n.toggleModal,c=n.onImgClick,l=this.onLoadMore;return"idle"===a?Object(b.jsx)(X,{}):"pending"===a?Object(b.jsx)(T,{}):"rejected"===a?Object(b.jsx)(_,{message:t}):"resolved"===a?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("ul",{className:te.imageGallery,children:r.map((function(e){var t=e.id,r=e.webformatURL,a=e.largeImageURL,n=e.tags;return Object(b.jsx)(v,{toggleModal:o,onImgClick:c,id:t,webformatURL:r,largeImageURL:a,tags:n})}))}),Object(b.jsx)(ee,{onLoadMore:l})]}):void 0}}]),r}(a.Component),ae=r(14),ne=document.querySelector("#modal-root"),oe=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleOverlayClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(s.a)(r,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.url,r=e.tag,a=this.handleOverlayClick;return Object(o.createPortal)(Object(b.jsx)("div",{className:ae.overlay,onClick:a,children:Object(b.jsx)("div",{className:ae.modal,children:Object(b.jsx)("img",{src:t,alt:r})})}),ne)}}]),r}(a.Component),ce=function(e){Object(i.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(l.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:"",showModal:!1,targetImg:null,imgName:null},e.handleFormSubmit=function(t){e.setState({searchQuery:t})},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.onImgClick=function(t){var r=t.currentTarget.dataset.action,a=t.target.alt;e.setState({targetImg:r}),e.setState({imgName:a})},e}return Object(s.a)(r,[{key:"render",value:function(){var e=this.state,t=e.searchQuery,r=e.showModal,a=e.targetImg,n=e.imgName,o=this.handleFormSubmit,c=this.toggleModal,l=this.onImgClick;return Object(b.jsxs)("div",{className:m.Style,children:[Object(b.jsx)(p,{onSubmit:o}),Object(b.jsx)(re,{searchQuery:t,toggleModal:c,onImgClick:l}),r&&Object(b.jsx)(oe,{url:a,tag:n,onClose:c}),Object(b.jsx)(h.a,{position:"top-center",autoClose:2e3})]})}}]),r}(a.Component);c.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(ce,{})}),document.getElementById("root"))},8:function(e,t,r){e.exports={searchbar:"Searchbar_searchbar__2FtfJ",searchForm:"Searchbar_searchForm__3KDps",searchFormButton:"Searchbar_searchFormButton__mU8lj",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__1njM4",searchFormInput:"Searchbar_searchFormInput__2nzD3"}}},[[49,1,2]]]);
//# sourceMappingURL=main.aa9963ea.chunk.js.map